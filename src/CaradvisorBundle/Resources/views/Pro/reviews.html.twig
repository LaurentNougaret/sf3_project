{% extends ('@Caradvisor/index.html.twig') %}
{% block body %}
    <section class="pro">
        <div class="container">
            <div class="row" id="account-pro-reviews">
                <div class="col-xs-12 text-center">
                    <h2 class="pro_account">Accès Professionnels</h2>
                </div>
                <div class="col-xs-12">
                    <h2 class="text-center">Les Avis</h2>
                </div>
                <div class="col-xs-10 col-xs-offset-1 col-md-6 col-md-offset-1">
                    <a href="{{ path('pro', {'pro': pro.id}) }}">
                        <p><i class="fa fa-angle-double-left" aria-hidden="true"> </i>
                            Revenir à Mon Compte</p><br>
                    </a>
                </div>
            </div>
            <div class="col-xs-12">
                <h3 class="text-center">Avis réparation</h3>
            </div>
            {% for review in data %}
                <div class="col-xs-12 col-sm-8 col-sm-offset-2 review">
                    <h4>L'avis</h4>
                    <p class="text-justify">{{ review.review }}</p>
                    <small>{{ review.user.lastname }} {{ review.user.firstname }}, {{ review.dateReview|date('d-m-y') }}</small>
                    <br><br><br>
                    {% if review.answer is null %}
                        <div class="col-xs-12">
                            <button type="submit" class="btn btn-primary center-block modify-pro-review" data-toggle="collapse"
                                    data-target="#answer-pro-{{ review.id }}">Répondre</button>
                        </div>
                        <div class="col-xs-12">
                            <div id="answer-pro-{{ review.id }}" class="collapse">
                                <div class="form-group">
                                    {{ form_start(form) }}
                                    {{ form_errors(form) }}
                                    <input type="hidden" value="{{ review.id }}" name="id">
                                    <input type="hidden" value="repair" name="type">
                                    {{ form_row(form.message) }}
                                    <button type="submit" class="btn btn-default center-block btn-send">
                                        Envoyer
                                    </button>
                                    {{ form_end(form) }}
                                 </div>
                                <hr>
                            </div>
                        </div>
                    {% else %}
                        <h4>La réponse</h4>
                        <p>{{ review.answer.message }}</p>
                        <small>{{ review.answer.date|date('d-m-y') }}</small>
                        <hr>
                    {% endif %}
                </div>

            {% endfor %}
            <div class="col-xs-12">
                <h3 class="text-center">Avis réparation</h3>
            </div>
            {% for review in beta %}
                <div class="col-xs-12 col-sm-8 col-sm-offset-2 review">
                    <h4>L'avis</h4>
                    <p class="text-justify">{{ review.review }}</p>
                    <small>{{ review.user.lastname }} {{ review.user.firstname }}
                        , {{ review.dateReview|date('d-m-y') }}</small>
                    <br><br><br>
                    {% if review.answer is null %}
                        <div class="col-xs-12">
                            <button type="submit" class="btn btn-primary center-block modify-pro-review"
                                    data-toggle="collapse" data-target="#answer-pro-{{ review.id }}">
                                Répondre
                            </button>
                        </div>

                        <div class="col-xs-12">
                            <div id="answer-pro-{{ review.id }}" class="collapse">

                                <div class="form-group">
                                    {{ form_start(form) }}
                                    {{ form_errors(form) }}
                                    <input type="hidden" value="{{ review.id }}" name="id">
                                    <input type="hidden" value="repair" name="type">
                                    {{ form_row(form.message) }}
                                    <button type="submit" class="btn btn-default center-block btn-send">
                                        Envoyer
                                    </button>
                                    {{ form_end(form) }}
                                </div>
                                <hr>
                            </div>
                        </div>
                    {% else %}
                        <h4>La réponse</h4>
                        <p>{{ review.answer.message }}</p>
                        <small>{{ review.answer.date|date('d-m-y') }}</small>
                        <hr>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </section>
{% endblock %}
